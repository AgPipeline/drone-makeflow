{
  "define": {
    "SHELL_COMMAND": "bash -c ",
    "BASE_DIR": BASE_DIR,
    "ODM_SCRIPT_NAME": "./odm_workflow.sh",
    "ODM_CACHE_DIR": CACHE_DIR,
    "ODM_EXPERIMENT_METADATA_FILENAME": BASE_DIR + EXPERIMENT_METADATA_FILENAME,
    "ODM_SOURCE_IMAGES_DIR": BASE_DIR + DATA_FOLDER_NAME
  },
  "rules": [
    {
      "command": "${SCRIPT_SHELL_COMMAND}",
      "environment": {
        "ODM_SCRIPT_NAME": ODM_SCRIPT_NAME,
        "SCRIPT_SHELL_COMMAND": SHELL_COMMAND + ODM_SCRIPT_NAME,
        "CACHE_DIR": ODM_CACHE_DIR,
        "BASE_DIR": BASE_DIR,
        "DATA_FOLDER_NAME": DATA_FOLDER_NAME,
        "DOCKER_VERSION": DOCKER_VERSION,
        "EXPERIMENT_METADATA_FILENAME": EXPERIMENT_METADATA_FILENAME,
        "IMAGE_MOUNT_SOURCE": IMAGE_MOUNT_SOURCE,
        "RELATIVE_WORKING_FOLDER": RELATIVE_WORKING_FOLDER
      },
      "inputs": [
        ODM_SCRIPT_NAME,
        ODM_EXPERIMENT_METADATA_FILENAME,
        ODM_SOURCE_IMAGES_DIR
      ],
      "outputs": [
        ODM_CACHE_DIR
      ]
    },
    {
      "command": "cp ${CACHE_DIR}${RESULTS_FILE_NAME} ${RESULTS_FILE_PATH}",
      "local_job": true,
      "environment": {
        "CACHE_DIR": ODM_CACHE_DIR,
        "RESULTS_FILE_NAME": "result.json",
        "RESULTS_FILE_PATH": RESULTS_FILE_PATH
      },
      "inputs": [
        ODM_CACHE_DIR
      ],
      "outputs": [
        RESULTS_FILE_PATH
      ]
    }
  ]
}
